# .-.aliases.misc 
# Used to add any miscellaneous aliases or commands

test "$SILENT" == false && echo -e "*\tMisc\t\t\t\t*"

# Symlink, clear, and history - convenience aliases
alias symlink='ln -s'
alias c='clear;'
alias h='history'

# Directory
alias md='mkdir -p'
alias rd='rmdir'

alias ..='cd ..'         # Go up one directory
alias ...='cd ../..'     # Go up two directories
alias ....='cd ../../..' # Go up three directories
alias -- -='cd -'        # Go back

# Safety - Force -i flags
alias rm='rm -I --preserve-root'
alias mv='mv -i'
alias cp='cp -i'
alias ln='ln -i'
alias chown='chown --preserve-root'
alias chmod='chmod --preserve-root'
alias chgrp='chgrp --preserve-root'

# Time & date
alias now='date +"%T'
alias nowtime=now
alias nowdate='date +"%d-%m-%Y"'

# Web server 
alias nginx_reload='sudo /usr/local/nginx/sbin/nginx -s reload'
alias nginx_test='sudo /usr/local/nginx/sbin/nginx -t'
alias lighty_load='sudo /etc/init.d/lighttpd reload'
alias lighty_test='sudo /usr/sbin/lighttpd -f /etc/lighttpd/lighttpd.conf -t'

# IP addresses
alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
alias localip="ipconfig getifaddr en1"
alias ips="ifconfig -a | grep -o 'inet6\? \(\([0-9]\+\.[0-9]\+\.[0-9]\+\.[0-9]\+\)\|[a-fA-F0-9:]\+\)' | sed -e 's/inet6* //'"

# Curl - convenience aliases
if (exists curl); then
    alias url_download='curl -O'
    alias url_headers='curl -I -L'
fi

# OS specific aliases below

if ( os_is darwin ); then
	# OSX
    
    # Remove Where From tag from mp3
    alias remove_where_tag="xattr -d com.apple.metadata:kMDItemWhereFroms ./*.*"
    
	# Grant or remove admin rights
	alias admin_on='sudo dseditgroup -o edit -a $USER -t user admin'
	alias admin_up='sudo dseditgroup -o edit -a $USER -t user admin'
	# Same as on off
    alias admin_off='sudo dseditgroup -o edit -d $USER -t user admin'
	alias admin_down='sudo dseditgroup -o edit -d $USER -t user admin'
    
	# Desktop Programs
	alias safari="open -a safari"
	alias firefox="open -a firefox"
	alias chrome="open -a google\ chrome"
	alias insecure_chrome="open -a Google\ Chrome --args --disable-web-security"
	alias canary="open -a google\ chrome\ canary"
	alias textmate='open -a TextMate'
	alias f='open -a Finder '
	alias fh='open -a Finder .'
        
	# Recursively delete `.DS_Store` files
	alias delete_ds_store="find . -type f -name '*.DS_Store' -ls -delete"

	# Empty the Trash on all mounted volumes and the main HDD
	# Also, clear Appleâ€™s System Logs to improve shell startup speed
	alias empty_trash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl"

	# Show/hide hidden files in Finder
	alias show_hidden_files="defaults write com.apple.Finder AppleShowAllFiles YES && killall Finder"
	alias hide_hidden_files="defaults write com.apple.Finder AppleShowAllFiles NO && killall Finder"

	# Hide/show all desktop icons (useful when presenting)
	alias hide_desktop="defaults write com.apple.finder CreateDesktop -bool false && killall Finder"
	alias show_desktop="defaults write com.apple.finder CreateDesktop -bool true && killall Finder"
    
    # Find Sublime Text path
    if [ -f /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl ]; then
        sublimePath=/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl
        
    elif [ -f ~/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl ]; then
        sublimePath=~/Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl
    else
        sublimePath=false
    fi
    
    # Auto symlink Sublime Text
    # If Sublime Text is installed on the machine add symlink according to Sublime's docs
    if [ -f "$sublimePath" ]; then
        if [ -d $HOME/bin ]; then
            # Check if home bin directory exists. If not try /usr/local
            if [ ! -L $HOME/bin/subl ]; then
                test "$SILENT" == false && echo -e '*\t\t\t\t\t*\n*  Symlink Sublime to ~/bin/subl \t*'
                ln -s "$sublimePath" $HOME/bin/subl
            fi
        elif [ -d /usr/local/bin ]; then   
            # Check if already a symbolic link to the file     
            if [ ! -L /usr/local/bin/subl ]; then   
                test "$SILENT" == false && echo -e '*\t\t\t\t\t*\n*  Symlink Sublime to /usr/local/bin \t*'
                ln -s "$sublimePath" /usr/local/bin/subl
            fi
        fi
    fi
    
    # If sublime is added to bin as subl then alias as sublime
    if (exists subl); then
        alias sublime='subl'
    elif (exists sublime); then
        alias subl='sublime'
    fi
    
    # Find TextMate path
    if [ -f /Applications/TextMate.app/Contents/Resources/mate ]; then
        textMatePath=/Applications/TextMate.app/Contents/Resources/mate
    elif [ -f ~/Applications/TextMate.app/Contents/Resources/mate ]; then
        textMatePath=~/Applications/TextMate.app/Contents/Resources/mate
    else
        textMatePath=false
    fi
    
    # Auto symlink TexMate
    # IF TextMate is installed on the machine add symlink according to Sublime's docs
    if [ -f "$textMatePath" ]; then
        if [ -f /Applications/TextMate.app/Contents/Resources/mate ]; then
            # Check if home bin directory exists. If not try /usr/local
            if [ -d $HOME/bin ]; then
                # Check if already a symbolic link to the file
                if [ ! -L $HOME/bin/mate ]; then
                    test "$SILENT" == false && echo -e '*\t\t\t\t\t*\n*  Symlink TextMate to ~/bin/mate \t*'
                    ln -s "$textMatePath" ~/bin/mate
                fi
            elif [ -d /usr/local/bin ]; then
                # Check if already a symbolic link to the file
                if [ ! -L /usr/local/bin/mate ]; then   
                    test "$SILENT" == false && echo -e '*\t\t\t\t\t*\n*  Symlink TextMate to /usr/local/bin \t*'
                    ln -s "$textMatePath" /usr/local/bin/mate
                fi
            fi
        fi
    fi
elif ( os_is linux ); then
	# Linux   
	alias system_version="lsb_release -a"
fi
